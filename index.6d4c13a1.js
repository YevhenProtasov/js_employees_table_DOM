let e=!0,t="";function r(e){return e.replace(",","").slice(1)}var n=function(n,a,o,i,s){let l=a.indexOf(n);switch(t===n?e=!e:(e=!0,t=n),o[l]){case"money":case"digits":i.sort((t,n)=>{let a=t.cells[l].textContent,i=n.cells[l].textContent;return"money"===o[l]&&(a=r(a),i=r(i)),e?a-i:i-a});break;case"words":i.sort((t,r)=>{let n=t.cells[l].textContent,a=r.cells[l].textContent;return e?n.localeCompare(a):a.localeCompare(n)})}i.forEach(e=>{s.appendChild(e)})};const a={convertSalaryToString:function(e){let t=String(e).split(""),r=1;for(let e=t.length-1;e>0;e--){if(3===r){r=1,t[e]=","+t[e];continue}r++}return"$"+t.join("")}},o=(e,t,r,n,a)=>{let o=document.querySelector("body"),i=document.createElement("div");switch(i.style.top=e+"px",i.style.right=t+"px",i.insertAdjacentHTML("afterbegin",`<h2 class="title">${r}</h2>`),i.insertAdjacentHTML("beforeend",`<p>${n}</p>`),i.setAttribute("data-qa","notification"),i.classList.add("notification"),a){case"success":i.classList.add("success");break;case"warning":i.classList.add("warning");break;default:i.classList.add("error")}o.appendChild(i),setTimeout(()=>i.remove(),4e3)},i={isValid:function(e,t){switch(e){case"name":return t.trim().length>=4;case"position":return!!t.trim();case"office":return!0;case"age":return t>=18&&t<90;case"salary":return t>=0&&t}}},s=["Tokyo","Singapore","London","New York","Edinburgh","San Francisco"],l=document.querySelector("body"),c=document.querySelector("table"),u=[],d=[],m=c.rows[0],p=c.children[1];let b=[...p.rows];[...m.cells].forEach(e=>{u.push(e.textContent),e.addEventListener("click",()=>{b=[...p.rows],n(e.textContent,u,d,b,p)})}),[...b[0].cells].forEach(e=>{var t;d.push("$"===(t=e.textContent)[0]&&1===t.split(/\s/).length?"money":"number"!=typeof Number(t)||isNaN(Number(t))?"words":"digits")}),[...b].forEach(e=>{e.addEventListener("click",()=>{[...b].forEach(e=>{e.classList.remove("active")}),e.classList.add("active")})}),({create:function({headers:e,tbody:t}){let r=document.createElement("form");r.classList.add("new-employee-form"),e.forEach(e=>{let t=e.toLowerCase(),n=document.createElement("label"),a=null;n.textContent=`${e}:`,"office"===t?(a=document.createElement("select"),s.forEach(e=>{let t=document.createElement("option");t.textContent=e,a.appendChild(t)})):a=document.createElement("input"),a.setAttribute("name",`${t}`),a.setAttribute("data-qa",`${t}`),("age"===t||"salary"===t)&&a.setAttribute("type","number"),n.appendChild(a),r.appendChild(n)});let n=document.createElement("button");n.textContent="Save to table",n.setAttribute("type","submit"),r.appendChild(n),l.appendChild(r),r.addEventListener("submit",n=>{n.preventDefault();let s=document.querySelector(".notification");s&&s.remove();let l=new FormData(r),c=!1,u=document.createElement("tr");e.forEach(e=>{if(c)return;let t=e.toLowerCase(),r=l.get(`${t}`);if(!i.isValid(t,r)){switch(c=!0,t){case"name":o(10,10,"Error","There was a problem with your submission.\n The name must have at least 4 letters.","error");break;case"position":o(10,10,"Error","There was a problem with your submission.\n The position cannot be an empty string.","error");break;case"age":o(10,10,"Error","There was a problem with your submission.\n It looks like you are either too young to work or should retire. Eligible age is 18 to 90 years old.","error");break;case"salary":o(10,10,"Error","There was a problem with your submission.\n The value should not be negative.","error")}return}if(!c){"salary"===t&&(r=a.convertSalaryToString(r));let e=document.createElement("td");e.textContent=r,u.appendChild(e)}}),c||(t.appendChild(u),o(10,10,"success","Great!\n The employee was added to the table.","success"),r.reset())})}}).create({headers:u,tbody:p}),p.addEventListener("dblclick",e=>{let t=e.target,r=t.innerText,n=[...t.parentElement.cells].indexOf(t),l=document.createElement("input");function c(e){if("Escape"===e.key){if("money"===d[n]){l.value=a.convertSalaryToString(r),t.innerText=a.convertSalaryToString(r);return}l.value=r,t.innerText=r;return}if("blur"===e.type||"Enter"===e.key){if("money"===d[n]){if(i.isValid("salary",Number(l.value))){t.innerText=l.value?a.convertSalaryToString(l.value):a.convertSalaryToString(r);return}o(10,10,"Error","There was a problem with your submission.\n The value should not be negative.","error"),l.value=a.convertSalaryToString(r),t.innerText=a.convertSalaryToString(r);return}if("digits"===d[n]){if(i.isValid("age",Number(l.value))){t.innerText=l.value;return}o(10,10,"Error","There was a problem with your submission.\n Age should be between 18 and 90.","error"),l.value=r,t.innerText=r;return}r=l.value,t.innerText=r}}"digits"===d[n]&&(l.setAttribute("type","number"),l.setAttribute("min","18"),l.setAttribute("max","90")),"money"===d[n]&&(l.setAttribute("type","number"),l.setAttribute("min","0"),l.setAttribute("step","100"),r=Number(r.replace(",","").slice(1))),"Office"===u[n]&&(l=document.createElement("select"),s.forEach(e=>{let t=document.createElement("option");t.textContent=e,l.appendChild(t)})),l.classList.add("cell-input"),l.value=r,t.innerText="",t.append(l),l.focus(),l.addEventListener("blur",c),l.addEventListener("keyup",c)});
//# sourceMappingURL=index.6d4c13a1.js.map
